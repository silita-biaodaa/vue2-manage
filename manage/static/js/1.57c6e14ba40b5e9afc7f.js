webpackJsonp([1],{441:function(e,t,i){i(453);var o=i(2)(i(446),i(457),null,null);e.exports=o.exports},446:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(37),a=i.n(o),s=i(3),r=i(7);t.default={data:function(){return{parentId:"",cpkid:"",careaName:"",pkid:"",code:"",title:"",pubDate:"",form:{projName:"",block:"",pubDate:"",projDq:"",projXs:"",pbMode:""},areas:[],counties:[],ways:[],type1s:[],types:[],activeIndex:"1",condition:"",state:"http://",relaSelect:[],urlupload:"",deurl:[],deleurl:[],deleturl:"",delcom:[],delcomp:[],delcompl:"",reli:[],ajson:{},list:[],releGp:"",arrpare:[],urltitle:"",fieldNames:[],engine:{},errpkid:[],position:"",isShow:!0,mainCo:[],aptituform:[{}],addList:[],relation:[{value:"OR",label:"和"},{value:"AND",label:"或"}],rela:"",uu:[],record:[],userSearchLoading:!1,addListt:[],content:""}},created:function(){this.gainDate(),this.listfixe(),this.listarr(),this.listAlia(),this.gainText()},mounted:function(){},watch:{$route:function(e,t){"recovery"===e.name&&(this.gainDate(),this.listfixe(),this.gainText())}},methods:{vanish:function(e){},gainText:function(){var e=this;i.i(r.a)({source:this.code,snatchUrlId:this.pkid}).then(function(t){console.log(t),1==t.code&&(e.content=t.data.content)})},userSearch:function(e){var t=this;""!==e&&(this.userSearchLoading=!0,i.i(r.g)({name:e}).then(function(e){t.addListt=e.data,t.userSearchLoading=!1}).catch(function(e){t.userSearchLoading=!1}))},gainDate:function(){this.code=this.$route.params.code,this.pkid=this.$route.params.id},textt:function(){console.log(this.aptituform)},addaptitu:function(){this.aptituform.push({})},deleteItem:function(e){e==this.aptituform.length-1&&void 0!=this.aptituform[e-1].rela&&s.default.delete(this.form[e-1],"rela"),this.aptituform.splice(e,1)},func:function(e){return this.aptituform.length-1!=e},listarr:function(){var e=this;this.engine=JSON.parse(localStorage.getItem("errTen")),this.position=localStorage.getItem("erinder"),i.i(r.b)({source:this.code,openDate:this.engine.openDate,openDateEnd:this.engine.openDateEnd,title:this.engine.title,type:this.engine.type,currentPage:"1",pageSize:"15"}).then(function(t){t.data.datas.forEach(function(t){e.errpkid.push(t.id)}),1==t.data.datas.length&&(e.isShow=!1)})},listAlia:function(){var e=this;i.i(r.g)({name:""}).then(function(t){e.addListt=t.data})},getTT:function(e){var t=this;i.i(r.g)({name:e}).then(function(e){console.log(e,"远程搜索到的企业"),e.data.forEach(function(e){t.uu.push(e.mainUuid,e.rank),e.mainUuid=t.uu.join("/"),t.uu=[],t.addList.push(e)}),console.log(t.addList,"放进数组里面的企业")})},getADD:function(){var e=this;setTimeout(function(){console.log(e.aptituform[0].certificate,"测试数据存在"),console.log(e.aptituform,"检测数据"),e.aptituform[0].certificate?(e.aptituform.forEach(function(t){e.getTT(t.certificate)}),console.log(e.addListt,"第二次检测数组"),e.addListt=e.addList):e.addListt=e.addList},300)},getAList:function(){var e=this;setTimeout(function(){e.addListt=e.addList,console.log(e.addListt)},350)},listfixe:function(){var e=this;i.i(r.h)({source:this.code,snatchUrlId:this.pkid}).then(function(t){console.log(t,303),1==t.code&&(e.careaName=t.data[0].source,e.form=t.data[0],0==!t.data[0].snatchUrlCerts.length?(e.aptituform=t.data[0].snatchUrlCerts,e.aptituform.forEach(function(e){e.aliasName=e.certificate})):e.aptituform=[{}])})},deletemark:function(){var e=this;this.$confirm("此操作将永久删除该公告, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.delpkid()}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},delpkid:function(){var e=this;i.i(r.e)({source:this.code,id:this.pkid}).then(function(t){if(1==t.code){if(e.errpkid.splice(e.position,1),1==e.errpkid.length&&(e.isShow=!1),0==e.errpkid.length)return e.$router.push({path:"/errhome"});e.$router.push({name:"recovery",params:{id:e.errpkid[e.position],code:e.code}}),parseInt(e.position)>e.errpkid.length&&(e.position=parseInt(e.position)-1)}})},lastlist:function(){if(0==parseInt(this.position))return this.$message({type:"warning",message:"已经是第一条公告，无法跳转~"});this.position=parseInt(this.position)-1,this.form={},this.$router.push({name:"recovery",params:{id:this.errpkid[this.position],code:this.code}})},nextlist:function(){if(parseInt(this.position)==this.errpkid.length-1)return this.$message({type:"warning",message:"已经是最后一条公告，无法跳转~"});this.position=parseInt(this.position)+1,this.form={},this.$router.push({name:"recovery",params:{id:this.errpkid[this.position],code:this.code}})},onSubmit:function(){var e=this;console.log(this.form,401),this.aptituform[0].aliasName?i.i(r.i)({snatchUrlId:this.pkid,source:this.code,projName:this.form.projName,block:this.form.block,projDq:this.form.projDq,projXs:this.form.projXs,pbMode:this.form.pbMode,id:this.form.id,snatchUrlCerts:this.aptituform}).then(function(t){1==t.code?e.$message({type:"success",message:"保存成功"}):console.log(t)}):i.i(r.i)({snatchUrlId:this.pkid,source:this.code,projName:this.form.projName,block:this.form.block,projDq:this.form.projDq,projXs:this.form.projXs,pbMode:this.form.pbMode,id:this.form.id,snatchUrlCerts:this.record}).then(function(t){1==t.code?e.$message({type:"success",message:"保存成功"}):console.log(t)})}},components:{Edit:a.a}}},449:function(e,t,i){t=e.exports=i(437)(!1),t.push([e.i,".compile{position:relative;overflow:hidden}.compile .urlma{margin-bottom:15px}.compile .menu-c{box-sizing:border-box;padding:0 10px;color:#303133;background-color:#ebeef5;line-height:60px;font-size:16px}.compile .menu-c .left-c{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.compile .menu-c .left-c .message-c span{margin-right:10px}.compile .menu-c .left-c .message-c a{color:#303133}.compile .menu-c .left-c .handle-c{cursor:pointer}.compile .menu-c .left-c .handle-c span{margin-right:10px}.compile .redact-c{padding:10px 20px}.compile .redact-c .btn{text-align:center}.compile .redact-c .labe{position:absolute;top:0;left:-200px;width:200px;text-align:center;font-size:12px;padding-right:12px;box-sizing:border-box}.compile .redact-c .labe .el-icon-warning{color:red;margin-right:5px}.compile .redact-c .rela .el-form-item{margin-top:8px;margin-bottom:0}.compile .redact-c .rela .el-rela .labe-rela{position:absolute;top:0;left:0;width:100px;text-align:center;font-size:12px;box-sizing:border-box}.compile .redact-c .rela .el-rela .el-select{margin-left:100px;width:40%}.compile .redact-c .old{color:#606266}.compile .redact-c .new{color:red}.compile .redact-c .el-form-item{margin-bottom:8px}.compile .redact-c .el-form-item__content{line-height:30px}.compile .redact-c .el-form-item__label{text-align:center;font-size:12px;line-height:30px;height:30px}.compile .redact-c .el-input__inner{width:80%;height:30px;line-height:30px}.compile .redact-c .el-select .el-input__inner{width:100%}.compile .redact-c .el-input__prefix,.compile .redact-c .el-input__suffix{top:2px}.compile .redact-c .el-date-editor.el-input,.compile .redact-c .el-date-editor.el-input__inner{width:100%}.compile .redact-c .block .el-input__prefix{top:-4px}.compile .main-t .edit-c{position:relative}.compile .main-t .edit-c .edit-l,.compile .main-t .edit-c .edit-r{z-index:99;color:#fff;position:absolute;height:45px;width:45px;border-radius:50%;background-color:#909399;opacity:.2;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center;line-height:45px;font-size:30px;font-weight:1000}.compile .main-t .edit-c .edit-l:hover,.compile .main-t .edit-c .edit-r:hover{opacity:1}.compile .main-t .edit-c .edit-r{right:0}.compile .main-t .edit-c .ql-editor{height:600px}.compile .main-t .right-c{overflow:hidden}",""])},453:function(e,t,i){var o=i(449);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(438)("51ebcb3b",o,!0)},457:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"refs",staticClass:"compile"},[i("el-row",{staticClass:"menu-c"},[i("el-col",{attrs:{span:24}},[i("el-row",[i("el-col",{staticClass:"left-c",attrs:{span:12}},[i("div",{staticClass:"message-c"},[i("a",{attrs:{href:this.state,target:"_blank"}},[e._v("来源站点")])]),e._v(" "),i("div",{staticClass:"handle-c"},[i("span",{on:{click:e.deletemark}},[e._v("删除")]),e._v(" "),i("span",{on:{click:e.textt}},[e._v("测试")])])]),e._v(" "),i("el-col",{staticClass:"right-c",attrs:{span:12}},[i("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal","background-color":"#EBEEF5","menu-trigger":"click"}},[i("el-menu-item",{attrs:{index:"1"}},[e._v("编辑")])],1)],1)],1)],1)],1),e._v(" "),i("el-row",{staticClass:"main-t"},[i("el-col",{staticClass:"edit-c",attrs:{span:12}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"edit-l",on:{click:e.lastlist}},[i("i",{staticClass:"el-icon-arrow-left"})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"edit-r",on:{click:e.nextlist}},[i("i",{staticClass:"el-icon-arrow-right"})]),e._v(" "),i("div",{staticClass:"ql-editor",domProps:{innerHTML:e._s(e.content)}})]),e._v(" "),i("el-col",{staticClass:"redact-c",attrs:{span:12}},[i("el-form",{ref:"edits",staticClass:"demo-ruleForm",attrs:{model:e.form,"label-width":"200px"}},[i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{model:{value:e.form.projName,callback:function(t){e.$set(e.form,"projName",t)},expression:"form.projName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"标段信息"}},[i("el-input",{model:{value:e.form.block,callback:function(t){e.$set(e.form,"block",t)},expression:"form.block"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"公示日期"}},[i("el-input",{model:{value:e.form.gsDate,callback:function(t){e.$set(e.form,"gsDate",t)},expression:"form.gsDate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"项目地区"}},[i("el-input",{model:{value:e.form.projDq,callback:function(t){e.$set(e.form,"projDq",t)},expression:"form.projDq"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"项目县区"}},[i("el-input",{model:{value:e.form.projXs,callback:function(t){e.$set(e.form,"projXs",t)},expression:"form.projXs"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"评标办法"}},[i("el-input",{model:{value:e.form.pbMode,callback:function(t){e.$set(e.form,"pbMode",t)},expression:"form.pbMode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"资质要求"}},e._l(e.aptituform,function(t,o){return i("div",{key:o,staticClass:"box"},[i("el-select",{staticClass:"el-select",staticStyle:{width:"65%"},attrs:{placeholder:"请选择资质和等级",filterable:"",remote:"","remote-method":e.userSearch,loading:e.userSearchLoading},on:{focus:function(t){e.vanish(o)}},model:{value:t.aliasName,callback:function(i){e.$set(t,"aliasName",i)},expression:"item.aliasName"}},e._l(e.addListt,function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),e._v(" "),i("el-button",{staticClass:"delete",attrs:{type:"primary",size:"mini"},on:{click:function(t){e.deleteItem(o)}}},[e._v("删除")]),e._v(" "),i("el-select",{directives:[{name:"show",rawName:"v-show",value:e.func(o),expression:"func(index)"}],staticClass:"el-select",attrs:{placeholder:"请选择资质关系",clearable:"",filterable:""},model:{value:t.type,callback:function(i){e.$set(t,"type",i)},expression:"item.type"}},e._l(e.relation,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)})),e._v(" "),i("el-form-item",{staticClass:"btn"},[i("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.addaptitu}},[e._v("添加")])],1)],1)],1)],1)],1)},staticRenderFns:[]}}});