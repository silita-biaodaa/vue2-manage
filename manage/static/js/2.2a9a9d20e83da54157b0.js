webpackJsonp([2],{467:function(t,e,a){a(495);var i=a(1)(a(476),a(505),"data-v-e3b33f42",null);t.exports=i.exports},476:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(9),n=a.n(i),s=a(11),l=a.n(s),r=a(3);e.default={data:function(){return{options3:[],tableData:[],input10:"",value7:"",currentPage4:"",currentPage:1,options:[],pageSize:20,pageCount:20,totalSize:1,total:1,province:"",licenses:"",comNames:"",Time:"",items:"",excelPath:"",upLoadExcelTxt:"上传Excel",func:!1,excel1:""}},mounted:function(){this.getData(),this.getProvinceData()},methods:{getProvinceData:function(){var t=this;a.i(r.r)("/common/area").then(function(e){var a=new Array,i=new Object;i.areaCode="",i.areaName="全部",a.push(i),null!=e.data&&e.data.length>0&&(a=a.concat(e.data)),t.options=a})},getData:function(t){var e=this;null!=t&&(this.currentPage=1);var i=n()({currentPage:this.currentPage,pageSize:this.pageSize,tabType:"safety_permission_cert",comName:this.comNames,certNo:this.licenses,certProvCode:this.province,expired:this.items,issueDate:this.Time});a.i(r.r)("/corp/requ/list",i).then(function(t){var a=t.data;console.log(t.data,206),null==a||0==a.length?(e.tableData=a.list,e.totalSize=0,e.pageCount=0,e.currentPage=1):(e.tableData=a.list,e.totalSize=t.data.total?t.data.total:0,e.pageCount=t.data.pageCount?t.data.pageCount:0,e.currentPage=t.data.currentPage?t.data.currentPage:1)})},deleteConfirm:function(){var t=this,e=this.selectDataList;if(null==e||0==e.length)return void this.$message({type:"info",message:"没有选择项"});this.$confirm("此操作将删除该条企业, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteData()}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},deleteData:function(){for(var t=this,e=this.selectDataList,i="",s=0;s<e.length;s++)i+=e[s].pkid+"|";var l=n()({tabType:"safety_permission_cert",pkids:i});a.i(r.r)("/corp/requ/del",l).then(function(e){t.$message({type:"info",message:e.msg});var a=t.currentPage;a>1&&(a-=1,t.currentPage=a),t.getData()})},handleSizeChange:function(t){this.pageSize=t,this.getData()},handleCurrentChange:function(t){this.currentPage=t,this.getData()},select:function(t){this.selectDataList=t},selectAll:function(t){this.selectDataList=t},downLoadExcel:function(){window.location.url=this.excelPath},uploadFileMethod:function(t){var e=this;if("传输中……"!=this.upLoadExcelTxt){this.excelPath="",this.upLoadExcelTxt="传输中……",this.func=!0;var a=t.file,i=new FormData;i.append("file",a),i.append("tabType","safety_permission_cert"),l.a.post("/upload/uploadCompanyFile",i,{headers:{"Content-Type":"multipart/form-data",Authorization:localStorage.getItem("Authorization")}}).then(function(t){e.upLoadExcelTxt="上传Excel",e.func=!1,405==t.data.code?(e.$message({type:"info",message:"上传失败,请下载上传结果查看"}),e.excelPath=t.data.data):(e.$message({type:"success",message:"上传成功~"}),e.getData())}).catch(function(t){console.log(t)})}},deletPath:function(){this.excelPath=""},allDelete:function(){var t=this;this.$confirm("是否删除筛选全部数据 , 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.i(r.s)({tabType:"safety_permission_cert",comName:t.comNames,certNo:t.licenses,certProvCode:t.province,expired:t.items,issueDate:t.Time}).then(function(e){1==e.code&&(t.getData(1),t.$message({type:"success",message:"筛选数据全删成功"}))})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},educe:function(){var t=this;if(!this.tableData)return this.$message({type:"warning",message:"暂无数据可导出!"});a.i(r.t)({tabType:"safety_permission_cert",comName:this.comNames,certNo:this.licenses,certProvCode:this.province,expired:this.items,issueDate:this.Time}).then(function(e){if(1==e.code){t.excel1=e.data;var a=document.createElement("a");a.href=t.excel1,a.download="w3logo",document.body.appendChild(a),a.click(),document.body.removeChild(a)}})}}}},486:function(t,e,a){e=t.exports=a(457)(!1),e.push([t.i,".allcover[data-v-e3b33f42]{position:absolute;top:0;right:0}.ctt[data-v-e3b33f42]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.tb[data-v-e3b33f42]{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.lr[data-v-e3b33f42]{position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.bdd_header[data-v-e3b33f42]{margin-left:30px;margin-right:30px}.bdd_pur[data-v-e3b33f42]{width:88px}.el-input[data-v-e3b33f42]{width:180px}.upload-demo[data-v-e3b33f42]{display:inline-block}.el-button--small[data-v-e3b33f42]{padding:13px 15px}.bdd_no[data-v-e3b33f42]{text-decoration:none;color:#fff}",""])},495:function(t,e,a){var i=a(486);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(458)("5fced96c",i,!0)},505:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bdd_header"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:20}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/prize"}}},[t._v("获奖信息")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/quality"}}},[t._v("公路信用评价等级")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/record"}}},[a("span",{staticStyle:{color:"dodgerblue"}},[t._v("安全生产许可证")])]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/safety"}}},[t._v("不良记录")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/security"}}},[t._v("安全认证")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/"}}})],1)],1)]),t._v(" "),a("el-col",{attrs:{span:4}})],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"30px"}},[a("el-col",{staticStyle:{"line-height":"50px"},attrs:{span:24}},[a("span",{staticClass:"grid-content bg-purple-dark"},[t._v("企业名称："),a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.comNames,callback:function(e){t.comNames="string"==typeof e?e.trim():e},expression:"comNames"}})],1),t._v(" "),a("span",{staticClass:"grid-content bg-purple-dark",staticStyle:{"margin-left":"20px"}},[t._v("安全生产许可证号："),a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.licenses,callback:function(e){t.licenses="string"==typeof e?e.trim():e},expression:"licenses"}})],1),t._v(" "),a("span",{staticClass:"grid-content bg-purple-dark",staticStyle:{"margin-left":"20px"}},[t._v("省份："),a("el-select",{staticClass:"bdd_pur",attrs:{placeholder:"省级地区"},on:{change:function(e){t.getData(1)}},model:{value:t.province,callback:function(e){t.province=e},expression:"province"}},t._l(t.options,function(t){return a("el-option",{key:t.pkid,attrs:{label:t.areaName,value:t.areaCode}})}))],1)])],1),t._v(" "),a("el-row",[a("el-col",{staticStyle:{"line-height":"50px"},attrs:{span:24}},[a("span",{staticClass:"grid-content bg-purple-dark"},[t._v("发布日期："),a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.Time,callback:function(e){t.Time="string"==typeof e?e.trim():e},expression:"Time"}})],1),t._v(" "),a("span",{staticClass:"grid-content bg-purple-dark",staticStyle:{"margin-left":"20px"}},[t._v("              有效期至："),a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.items,callback:function(e){t.items="string"==typeof e?e.trim():e},expression:"items"}})],1)])],1),t._v(" "),a("el-row",[a("el-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.getData(1)}}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.deleteConfirm}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.allDelete}},[t._v("全部删除")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.educe}},[t._v("导出Excel")]),t._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{disabled:t.func,action:"","http-request":t.uploadFileMethod,"show-file-list":!1}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"}},[t._v(t._s(t.upLoadExcelTxt))])],1),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.excelPath,expression:"excelPath"}],staticStyle:{"margin-left":"10px"},attrs:{type:"primary"}},[a("a",{staticClass:"bdd_no",attrs:{download:"w3logo",href:t.excelPath}},[t._v("查看结果\n                    ")]),a("span",{on:{click:t.deletPath}},[a("i",{staticClass:"el-icon-circle-close-outline",staticStyle:{color:"#ffffff"}})])])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:t.tableData,border:""},on:{select:t.select,"select-all":t.selectAll}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"comName",label:"企业名称",width:"360"}}),t._v(" "),a("el-table-column",{attrs:{prop:"certNo",label:"安全生产许可证号",width:"360"}}),t._v(" "),a("el-table-column",{attrs:{prop:"certProv",label:"省份",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"issueDate",label:"发布日期",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"expired",label:"有效期至",width:"180"}})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,60],"page-size":t.pageSize,"page-count":t.pageCount,layout:"total, sizes, prev, pager, next, jumper",total:t.totalSize},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)},staticRenderFns:[]}}});