webpackJsonp([13],{1010:function(t,e,a){a(1064);var i=a(5)(a(1029),a(1102),"data-v-412d4487",null);t.exports=i.exports},1029:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(52),o=a.n(i),r=a(53),d=a.n(r),l=a(9),n=a(66);e.default={data:function(){var t;return t={firm:"",tableData:[],total:0,pagesize:15,pagenum:1,sendVal:"",roleInfo:null,role:"",desc:"",id:""},d()(t,"firm",""),d()(t,"edit",!1),d()(t,"labelPosition","right"),d()(t,"ruleFormEdit",{roles:""}),d()(t,"rulesEdit",{roles:[{required:!0,message:"请输入角色名称",trigger:"blur"}]}),d()(t,"powerData",[]),d()(t,"defaultProps",{children:"data",label:"title"}),d()(t,"rolePower",""),d()(t,"showId",[]),d()(t,"rid",""),d()(t,"isAllows",null),t},methods:{roleList:function(){var t=this;if(this.desc){var e=!0,i=!1,r=void 0;try{for(var d,s=o()(this.role);!(e=(d=s.next()).done);e=!0){var c=d.value;this.desc==c.desc&&(this.id=c.rid)}}catch(t){i=!0,r=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw r}}}var f={currentPage:this.pagenum,pageSize:this.pagesize,desc:this.firm,rid:this.id};a.i(l.B)(f).then(function(e){if("1"==e.code){var i=e.data,r=i.list,d=i.total;if(r.length>0){var l=!0,s=!1,c=void 0;try{for(var f,m=o()(r);!(l=(f=m.next()).done);l=!0){var p=f.value;p.created&&(p.created=a.i(n.a)(p.created).slice(0,10))}}catch(t){s=!0,c=t}finally{try{!l&&m.return&&m.return()}finally{if(s)throw c}}}t.tableData=r,t.total=d}else console.info("管理员账号接口不通")})},getRole:function(){var t=this;a.i(l.C)().then(function(e){"1"==e.code?t.role=e.data:console.info("获取角色列表接口不通")})},addRole:function(){this.sendVal=!0},changetable:function(){var t=this;this.pagenum=1,setTimeout(function(){return t.roleList()},100)},handleCurrentChange:function(t){this.pagenum=t,this.roleList()},handleSizeChange:function(t){this.pagesize=t,this.roleList()},searchData:function(){this.pagenum=1,this.roleList()},clear:function(){""==this.firm&&this.roleList()},handleRefesh:function(t){var e=this;t||(this.id="",setTimeout(function(){return e.roleList(),e.getRole()},100))},editRole:function(t,e){var i=this;this.$refs.tree.setCheckedNodes([]),this.showId=[],this.edit=!0,this.rid=e.rid,this.rolePower=e.desc,a.i(l.D)({rid:e.rid}).then(function(t){if("1"==t.code){for(var e=0;e<t.data.length;e++)for(var a=0;a<t.data[e].data.length;a++)null==t.data[e].data[a].optiond&&(t.data[e].data[a].currentStage="3");i.powerData=t.data;var r=!0,d=!1,l=void 0;try{for(var n,s=o()(t.data);!(r=(n=s.next()).done);r=!0){var c=n.value,f=!0,m=!1,p=void 0;try{for(var v,u=o()(c.data);!(f=(v=u.next()).done);f=!0){var b=v.value;null!==b.optiond&&i.showId.push(b.id)}}catch(t){m=!0,p=t}finally{try{!f&&u.return&&u.return()}finally{if(m)throw p}}}}catch(t){d=!0,l=t}finally{try{!r&&s.return&&s.return()}finally{if(d)throw l}}}else console.info("查询可编辑权限不通")})},closeMask:function(){this.edit=!1,this.powerData=[],this.showId=[]},operate:function(t,e){e.currentStage="2"},ready:function(t,e){e.currentStage="1"},submitForm:function(t){var e=this,i=this.$refs.tree.getCheckedKeys().filter(function(t){return t>1e4});this.$refs[t].validate(function(t){for(var r="",d=0;d<e.powerData.length;d++)for(var n=0;n<e.powerData[d].data.length;n++){var s=!0,c=!1,f=void 0;try{for(var m,p=o()(i);!(s=(m=p.next()).done);s=!0){var v=m.value;if(v==e.powerData[d].data[n].id){var u=v,b="";e.powerData[d].data[n].currentStage?(b="2"==e.powerData[d].data[n].currentStage?"operability":"read",""==r?r=u+"/"+b:r+=","+u+"/"+b):""==r?r=u+"/"+e.powerData[d].data[n].optiond:r+=","+u+"/"+e.powerData[d].data[n].optiond}}}catch(t){c=!0,f=t}finally{try{!s&&p.return&&p.return()}finally{if(c)throw f}}}if(!t)return!1;var g={rid:e.rid,desc:e.rolePower,ids:r};a.i(l.E)(g).then(function(t){"1"==t.code?(e.edit=!1,e.$message({type:"success",message:"操作成功"}),e.$refs.tree.setCheckedNodes([]),e.roleList()):e.$message({type:"warning",message:t.msg})})})}},created:function(){this.roleList(),this.getRole(),this.isAllows=this.$route.query.isAllows}}},1047:function(t,e,a){e=t.exports=a(1004)(!1),e.push([t.i,".allcover[data-v-412d4487]{position:absolute;top:0;right:0}.ctt[data-v-412d4487]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.tb[data-v-412d4487]{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.lr[data-v-412d4487]{position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.fl[data-v-412d4487]{float:left;overflow:hidden}.fr[data-v-412d4487]{float:right;overflow:hidden}.drc[data-v-412d4487]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.dc[data-v-412d4487],.dcr[data-v-412d4487]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.dcr[data-v-412d4487]{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.dfcc[data-v-412d4487]{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.dfcc[data-v-412d4487],.dfrcb[data-v-412d4487]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.dfrcb[data-v-412d4487]{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.dfrb[data-v-412d4487]{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.dfrb[data-v-412d4487],.dfrca[data-v-412d4487]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.dfrca[data-v-412d4487]{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around}.cp[data-v-412d4487]{cursor:pointer}.fs10[data-v-412d4487]{font-size:.222222rem;font-family:siyuan-l;-webkit-transform:scale(.85);transform:scale(.85);display:inline-block;position:absolute;width:-webkit-max-content;width:max-content;width:5.925926rem;margin-left:-.296296rem}.fs12[data-v-412d4487]{font-size:.222222rem}.fs13[data-v-412d4487]{font-size:.240741rem}.fs14[data-v-412d4487]{font-size:.259259rem}.fs16[data-v-412d4487]{font-size:.296296rem}.fs18[data-v-412d4487]{font-size:.333333rem}.fs20[data-v-412d4487]{font-size:.37037rem}.fs24[data-v-412d4487]{font-size:.444444rem}.fs26[data-v-412d4487]{font-size:.481481rem}.fs28[data-v-412d4487]{font-size:.518519rem}.fs30[data-v-412d4487]{font-size:.555556rem}.fs34[data-v-412d4487]{font-size:.62963rem}.fs40[data-v-412d4487]{font-size:.740741rem}.fs45[data-v-412d4487]{font-size:.833333rem}.fs50[data-v-412d4487]{font-size:.925926rem}.fs52[data-v-412d4487]{font-size:.962963rem}.fw500[data-v-412d4487]{font-weight:500}.fw600[data-v-412d4487]{font-weight:600}.blod[data-v-412d4487],.fw700[data-v-412d4487]{font-weight:700}.mt10[data-v-412d4487]{margin-top:.185185rem}.mt20[data-v-412d4487]{margin-top:.37037rem}.mt30[data-v-412d4487]{margin-top:.555556rem}.mt40[data-v-412d4487]{margin-top:.740741rem}.mt50[data-v-412d4487]{margin-top:.925926rem}.mt80[data-v-412d4487]{margin-top:1.481481rem}.mb10[data-v-412d4487]{margin-bottom:.185185rem}.mb20[data-v-412d4487]{margin-bottom:.37037rem}.mb30[data-v-412d4487]{margin-bottom:.555556rem}.mb40[data-v-412d4487]{margin-bottom:.740741rem}.mb50[data-v-412d4487]{margin-bottom:.925926rem}.ml10[data-v-412d4487]{margin-left:.185185rem}.ml20[data-v-412d4487]{margin-left:.37037rem}.ml30[data-v-412d4487]{margin-left:.555556rem}.ml40[data-v-412d4487]{margin-left:.740741rem}.ml50[data-v-412d4487]{margin-left:.925926rem}.mr10[data-v-412d4487]{margin-right:.185185rem}.mr20[data-v-412d4487]{margin-right:.37037rem}.mr30[data-v-412d4487]{margin-right:.555556rem}.mr40[data-v-412d4487]{margin-right:.740741rem}.mr50[data-v-412d4487]{margin-right:.925926rem}.pt10[data-v-412d4487]{padding-top:.185185rem}.pt20[data-v-412d4487]{padding-top:.37037rem}.pt30[data-v-412d4487]{padding-top:.555556rem}.pt40[data-v-412d4487]{padding-top:.740741rem}.pt50[data-v-412d4487]{padding-top:.925926rem}.pb10[data-v-412d4487]{padding-bottom:.185185rem}.pb20[data-v-412d4487]{padding-bottom:.37037rem}.pb30[data-v-412d4487]{padding-bottom:.555556rem}.pb40[data-v-412d4487]{padding-bottom:.740741rem}.pb50[data-v-412d4487]{padding-bottom:.925926rem}.pl10[data-v-412d4487]{padding-left:.185185rem}.pl20[data-v-412d4487]{padding-left:.37037rem}.pl30[data-v-412d4487]{padding-left:.555556rem}.pl40[data-v-412d4487]{padding-left:.740741rem}.pl50[data-v-412d4487]{padding-left:.925926rem}.pr10[data-v-412d4487]{padding-right:.185185rem}.pr20[data-v-412d4487]{padding-right:.37037rem}.pr30[data-v-412d4487]{padding-right:.555556rem}.pr40[data-v-412d4487]{padding-right:.740741rem}.pr50[data-v-412d4487]{padding-right:.925926rem}.text-c[data-v-412d4487]{text-align:center}.text-l[data-v-412d4487]{text-align:left}.text-r[data-v-412d4487]{text-align:right}.bg-red[data-v-412d4487]{background:#c96148}.bg-fff[data-v-412d4487]{background:#fff}.bg-fa[data-v-412d4487]{background:#fafafa}.bg-f62[data-v-412d4487]{background:#f62135}.bg-00a[data-v-412d4487]{background:#00ad59}.bg-409[data-v-412d4487]{background:#409eff}.bg-000[data-v-412d4487]{background:#000}.color-red[data-v-412d4487]{color:#c96148}.color-666[data-v-412d4487]{color:#666}.color-fff[data-v-412d4487]{color:#fff}.color-333[data-v-412d4487]{color:#333}.color-999[data-v-412d4487]{color:#999}.color-b3[data-v-412d4487]{color:#b3b3b3}.color-00a[data-v-412d4487]{color:#00ad59}.color-90[data-v-412d4487]{color:#909090}.color-409[data-v-412d4487]{color:#409eff}.color-60[data-v-412d4487]{color:#606266}.color-f62[data-v-412d4487]{color:#f62135}.color-150[data-v-412d4487]{color:#150000}.color-38[data-v-412d4487]{color:#383838}.color-224[data-v-412d4487]{color:#244cd7}.color-000[data-v-412d4487]{color:#000}.public_table_list[data-v-412d4487]{padding:0 .555556rem;border:.018519rem solid #fff;border-right:none;background-color:#fff}.public_table_list .public_table[data-v-412d4487]{border-top:.018519rem solid #ebeef5!important;border-left:.018519rem solid #ebeef5!important}.adminRole .adminRole_top[data-v-412d4487]{margin-bottom:.092593rem;padding:0 .555556rem}.adminRole .adminRole_top .fl-left[data-v-412d4487]{margin-left:.555556rem}.adminRole .adminRole_top .el-col-2[data-v-412d4487]{padding-right:.555556rem}.adminRole .adminRole_top .el-col-2 span[data-v-412d4487]{font-size:.296296rem;color:#409eff;cursor:pointer}.adminRole .fl-right[data-v-412d4487]{text-align:right;margin:.37037rem 0 .092593rem}.adminRole .fl-right .fl-left[data-v-412d4487]{margin-left:.37037rem}.adminRole .handle_authority[data-v-412d4487],.adminRole .handle_cancel[data-v-412d4487],.adminRole .handle_set[data-v-412d4487]{font-size:.259259rem;color:#409eff;cursor:pointer}.adminRole .block[data-v-412d4487]{padding:0 .555556rem;margin-top:.555556rem}.adminRole .dialog[data-v-412d4487]{position:fixed;top:0;bottom:0;left:0;right:0;background:rgba(0,0,0,.6);z-index:10}.adminRole .dialog .dialog-container[data-v-412d4487]{width:9.259259rem;background:#eee;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);position:relative;padding:.37037rem}.adminRole .dialog .dialog-container .popup_form .el-form-item__content[data-v-412d4487]{margin-left:0!important}.adminRole .dialog .dialog-container .popup_form .popup_title[data-v-412d4487]{color:#606266}.adminRole .dialog .dialog-container .popup_scollbar[data-v-412d4487]{background-color:#fff}.adminRole .dialog .dialog-container .popup_scollbar .el-tree[data-v-412d4487]{max-height:7.407407rem}.adminRole .dialog .dialog-container .popup_scollbar .custom-tree-node[data-v-412d4487]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;font-size:.259259rem;padding-right:.148148rem}.adminRole .dialog .dialog-container .popup_scollbar .select_power[data-v-412d4487]{display:inline-block;width:.222222rem;height:.222222rem;border-radius:.111111rem}.adminRole .dialog .popup_table[data-v-412d4487]{border:.018519rem solid #ddd}.adminRole .dialog .popup_scollbar[data-v-412d4487]{max-height:9.259259rem;overflow-x:hidden;overflow-y:scroll}.adminRole .dialog .popup_scollbar[data-v-412d4487]::-webkit-scrollbar{display:none}.adminRole .dialog .popup_btn[data-v-412d4487]{background-color:#409eff;width:100%;text-align:center;margin-right:.37037rem;cursor:pointer}.adminRole .dialog .el-form-item[data-v-412d4487]{padding-right:.37037rem}.adminRole .dialog .role_list[data-v-412d4487]{width:100%;height:100%;font-size:.259259rem;color:#606266;padding-left:.833333rem;margin-bottom:.407407rem}.adminRole .dialog .hidden[data-v-412d4487]{display:none}",""])},1064:function(t,e,a){var i=a(1047);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1005)("8d6b4908",i,!0)},1102:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"adminRole"},[a("div",{staticClass:"mb30"},[a("el-row",{staticClass:"adminRole_top",attrs:{span:24,type:"flex",justify:"space-between",align:"middle"}},[a("el-col",{staticClass:"ft14 text-l",attrs:{span:8}},[t._v("\n        角色名称：\n        "),a("el-select",{staticClass:"ml10",staticStyle:{width:"60%"},on:{change:t.changetable},model:{value:t.desc,callback:function(e){t.desc=e},expression:"desc"}},t._l(t.role,function(t){return a("el-option",{key:t.rid,attrs:{label:t.desc,value:t.desc}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("span",{on:{click:t.addRole}},[t._v("添加角色")])])],1)],1),t._v(" "),a("el-row",{staticClass:"public_table_list"},[a("el-col",{attrs:{span:24}},[a("el-table",{staticClass:"public_table",attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"角色名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.desc))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.created))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"handle_authority",on:{click:function(a){return t.editRole(e.$index,e.row)}}},[t._v("编辑权限")])]}}])})],1)],1)],1),t._v(" "),a("div",{staticClass:"block pl50 mt30"},[a("el-pagination",{attrs:{"current-page":1,"page-sizes":[15,30,45,60],"page-size":15,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],staticClass:"dialog"},[a("div",{staticClass:"dialog-container"},[a("div",{staticClass:"dfrcb ft20 mb10"},[a("div",{staticStyle:{margin:"0 auto"}},[t._v("编辑权限")]),t._v(" "),a("i",{staticClass:"el-icon-close",on:{click:t.closeMask}})]),t._v(" "),a("div",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm("ruleFormEdit")}}},[a("el-form",{ref:"ruleFormEdit",attrs:{"label-position":t.labelPosition,"label-width":"100px",model:t.ruleFormEdit,rules:t.rulesEdit}},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{staticClass:"ft14 color-60 ml20"},[t._v("\n              角色名称：\n              "),a("el-select",{staticClass:"ml10",staticStyle:{width:"60%"},on:{change:t.changetable},model:{value:t.rolePower,callback:function(e){t.rolePower=e},expression:"rolePower"}},t._l(t.role,function(t){return a("el-option",{key:t.rid,attrs:{label:t.desc,value:t.desc}})}),1)],1)],1),t._v(" "),a("el-form-item",{staticClass:"popup_form"},[a("div",{staticClass:"pl20"},[a("div",{staticClass:"popup_title"},[t._v("权限:")]),t._v(" "),a("div",{staticClass:"bg-fff popup_scollbar"},[a("el-tree",{ref:"tree",attrs:{data:t.powerData,"show-checkbox":"",props:t.defaultProps,"default-expand-all":"","node-key":"id","default-checked-keys":t.showId},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,o=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{staticClass:"ml10"},[t._v(t._s(i.label))]),t._v(" "),a("span",[a("span",{class:o.id>1e4?"":"hidden"},[a("input",{staticClass:"select_power",attrs:{type:"radio",name:o.id},domProps:{checked:"read"==o.optiond||"1"==o.currentStage},on:{click:function(){return t.ready(i,o)}}}),t._v(" "),a("span",[t._v("只读")])]),t._v(" "),a("span",{class:o.id>1e4?"":"hidden"},[a("input",{staticClass:"select_power ml10",attrs:{type:"radio",name:o.id},domProps:{checked:"operability"==o.optiond||"2"==o.currentStage},on:{click:function(){return t.operate(i,o)}}}),t._v(" "),a("span",[t._v("可操作")])])])])}}])})],1)])]),t._v(" "),a("el-form-item",{staticClass:"popup_form_btn pl20"},[a("div",{staticClass:"popup_btn color-fff",on:{click:function(e){return t.submitForm("ruleFormEdit")}}},[t._v("保存")])])],1)],1)])]),t._v(" "),a("powerPopup",{attrs:{showMask:!0,isAllows:t.isAllows},on:{refesh:t.handleRefesh},model:{value:t.sendVal,callback:function(e){t.sendVal=e},expression:"sendVal"}})],1)},staticRenderFns:[]}}});