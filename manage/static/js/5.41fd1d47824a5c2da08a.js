webpackJsonp([5],{476:function(e,t,a){a(507);var i=a(1)(a(485),a(517),"data-v-e3b33f42",null);e.exports=i.exports},485:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(9),n=a.n(i),l=a(11),s=a.n(l),r=a(3);t.default={data:function(){return{options3:[],tableData:[],input10:"",value7:"",currentPage4:"",currentPage:1,options:[],pageSize:20,pageCount:20,totalSize:1,total:1,province:"",licenses:"",comNames:"",Time:"",items:"",excelPath:"",upLoadExcelTxt:"上传Excel",func:!1,excel1:""}},mounted:function(){this.getData(),this.getProvinceData()},methods:{getProvinceData:function(){var e=this;a.i(r.m)("/common/area").then(function(t){var a=new Array,i=new Object;i.areaCode="",i.areaName="全部",a.push(i),null!=t.data&&t.data.length>0&&(a=a.concat(t.data)),e.options=a})},getData:function(e){var t=this;null!=e&&(this.currentPage=1);var i=n()({currentPage:this.currentPage,pageSize:this.pageSize,tabType:"safety_permission_cert",comName:this.comNames,certNo:this.licenses,certProvCode:this.province,expired:this.items,issueDate:this.Time});a.i(r.m)("/corp/requ/list",i).then(function(e){var a=e.data;console.log(e.data,206),null==a||0==a.length?(t.tableData=a.list,t.totalSize=0,t.pageCount=0,t.currentPage=1):(t.tableData=a.list,t.totalSize=e.data.total?e.data.total:0,t.pageCount=e.data.pageCount?e.data.pageCount:0,t.currentPage=e.data.currentPage?e.data.currentPage:1)})},deleteConfirm:function(){var e=this,t=this.selectDataList;if(null==t||0==t.length)return void this.$message({type:"info",message:"没有选择项"});this.$confirm("此操作将删除该条企业, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteData()}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},deleteData:function(){for(var e=this,t=this.selectDataList,i="",l=0;l<t.length;l++)i+=t[l].pkid+"|";var s=n()({tabType:"safety_permission_cert",pkids:i});a.i(r.m)("/corp/requ/del",s).then(function(t){e.$message({type:"info",message:t.msg});var a=e.currentPage;a>1&&(a-=1,e.currentPage=a),e.getData()})},handleSizeChange:function(e){this.pageSize=e,this.getData()},handleCurrentChange:function(e){this.currentPage=e,this.getData()},select:function(e){this.selectDataList=e},selectAll:function(e){this.selectDataList=e},downLoadExcel:function(){window.location.url=this.excelPath},uploadFileMethod:function(e){var t=this;if("传输中……"!=this.upLoadExcelTxt){this.excelPath="",this.upLoadExcelTxt="传输中……",this.func=!0;var a=e.file,i=new FormData;i.append("file",a),i.append("tabType","safety_permission_cert"),s.a.post("/upload/uploadCompanyFile",i,{headers:{"Content-Type":"multipart/form-data",Authorization:localStorage.getItem("Authorization")}}).then(function(e){t.upLoadExcelTxt="上传Excel",t.func=!1,405==e.data.code?(t.$message({type:"info",message:"上传失败,请下载上传结果查看"}),t.excelPath=e.data.data):(t.$message({type:"success",message:"上传成功~"}),t.getData())}).catch(function(e){console.log(e)})}},deletPath:function(){this.excelPath=""},allDelete:function(){var e=this;this.$confirm("是否删除筛选全部数据 , 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.i(r.n)({tabType:"safety_permission_cert",comName:e.comNames,certNo:e.licenses,certProvCode:e.province,expired:e.items,issueDate:e.Time}).then(function(t){1==t.code&&(e.getData(1),e.$message({type:"success",message:"筛选数据全删成功"}))})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},educe:function(){var e=this;if(!this.tableData)return this.$message({type:"warning",message:"暂无数据可导出!"});a.i(r.o)({tabType:"safety_permission_cert",comName:this.comNames,certNo:this.licenses,certProvCode:this.province,expired:this.items,issueDate:this.Time}).then(function(t){if(1==t.code){e.excel1=t.data;var a=document.createElement("a");a.href=e.excel1,a.download="w3logo",document.body.appendChild(a),a.click(),document.body.removeChild(a)}})}}}},498:function(e,t,a){t=e.exports=a(469)(!1),t.push([e.i,".allcover[data-v-e3b33f42]{position:absolute;top:0;right:0}.ctt[data-v-e3b33f42]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.tb[data-v-e3b33f42]{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.lr[data-v-e3b33f42]{position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.dfcc[data-v-e3b33f42],.drc[data-v-e3b33f42]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.dfcc[data-v-e3b33f42]{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.dfrcb[data-v-e3b33f42]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.bdd_header[data-v-e3b33f42]{margin-left:30px;margin-right:30px}.bdd_pur[data-v-e3b33f42]{width:88px}.el-input[data-v-e3b33f42]{width:180px}.upload-demo[data-v-e3b33f42]{display:inline-block}.el-button--small[data-v-e3b33f42]{padding:13px 15px}.bdd_no[data-v-e3b33f42]{text-decoration:none;color:#fff}",""])},507:function(e,t,a){var i=a(498);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(470)("8a4e2fde",i,!0)},517:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bdd_header"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:20}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/prize"}}},[e._v("获奖信息")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/quality"}}},[e._v("公路信用评价等级")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/record"}}},[a("span",{staticStyle:{color:"dodgerblue"}},[e._v("安全生产许可证")])]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/safety"}}},[e._v("不良记录")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/security"}}},[e._v("安全认证")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/"}}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:4}})],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"30px"}},[a("el-col",{staticStyle:{"line-height":"50px"},attrs:{span:24}},[a("span",{staticClass:"grid-content bg-purple-dark"},[e._v("企业名称："),a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.comNames,callback:function(t){e.comNames="string"==typeof t?t.trim():t},expression:"comNames"}})],1),e._v(" "),a("span",{staticClass:"grid-content bg-purple-dark",staticStyle:{"margin-left":"20px"}},[e._v("安全生产许可证号："),a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.licenses,callback:function(t){e.licenses="string"==typeof t?t.trim():t},expression:"licenses"}})],1),e._v(" "),a("span",{staticClass:"grid-content bg-purple-dark",staticStyle:{"margin-left":"20px"}},[e._v("省份："),a("el-select",{staticClass:"bdd_pur",attrs:{placeholder:"省级地区"},on:{change:function(t){return e.getData(1)}},model:{value:e.province,callback:function(t){e.province=t},expression:"province"}},e._l(e.options,function(e){return a("el-option",{key:e.pkid,attrs:{label:e.areaName,value:e.areaCode}})}),1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{staticStyle:{"line-height":"50px"},attrs:{span:24}},[a("span",{staticClass:"grid-content bg-purple-dark"},[e._v("发布日期："),a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.Time,callback:function(t){e.Time="string"==typeof t?t.trim():t},expression:"Time"}})],1),e._v(" "),a("span",{staticClass:"grid-content bg-purple-dark",staticStyle:{"margin-left":"20px"}},[e._v("              有效期至："),a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.items,callback:function(t){e.items="string"==typeof t?t.trim():t},expression:"items"}})],1)])],1),e._v(" "),a("el-row",[a("el-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getData(1)}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteConfirm}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.allDelete}},[e._v("全部删除")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.educe}},[e._v("导出Excel")]),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{disabled:e.func,action:"","http-request":e.uploadFileMethod,"show-file-list":!1}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"}},[e._v(e._s(e.upLoadExcelTxt))])],1),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.excelPath,expression:"excelPath"}],staticStyle:{"margin-left":"10px"},attrs:{type:"primary"}},[a("a",{staticClass:"bdd_no",attrs:{download:"w3logo",href:e.excelPath}},[e._v("查看结果\n                    ")]),a("span",{on:{click:e.deletPath}},[a("i",{staticClass:"el-icon-circle-close-outline",staticStyle:{color:"#ffffff"}})])])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.tableData,border:""},on:{select:e.select,"select-all":e.selectAll}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"comName",label:"企业名称",width:"360"}}),e._v(" "),a("el-table-column",{attrs:{prop:"certNo",label:"安全生产许可证号",width:"360"}}),e._v(" "),a("el-table-column",{attrs:{prop:"certProv",label:"省份",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"issueDate",label:"发布日期",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"expired",label:"有效期至",width:"180"}})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,60],"page-size":e.pageSize,"page-count":e.pageCount,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)},staticRenderFns:[]}}});